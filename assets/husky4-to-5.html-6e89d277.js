import{_ as i,X as l,Y as c,Z as o,$ as e,a1 as s,a2 as d,C as t}from"./framework-43a12551.js";const a={},u=o("p",null,[e("由于 "),o("code",null,"husky"),e(" 这个插件在升级到 5.+ 的版本后有一个配置上的更新，因此需要对现有项目中的配置文件进行重新配置。如果现在有项目使用 4.x 版本想升级的也可以进行升级。")],-1),r={href:"https://typicode.github.io/husky/#/?id=migrate-from-v4-to-v7",target:"_blank",rel:"noopener noreferrer"},m=d(`<ol><li><p>升级<code>husky</code>版本（如果不需要可以跳过）</p><p>更改 package.json 里面的版本号为最新，然后<code>sudo lnpm install</code>即可。</p></li><li><p>初始化新版 <code>husky</code></p><p>新版 <code>husky</code> 需要有一个 <code>install</code> 的操作，安装新版后需要执行<code>husky install</code>命令，<strong>刚 <code>clone</code> 下来的项目也需要进行 <code>install</code> 操作</strong>，同理。</p></li><li><p>根据之前的配置文件重新配置</p><p>一般来说，现有项目的 <code>husky</code> 配置都在 <code>package.json</code> 中，可以看到有 <code>husky</code> 的相关配置，例如：</p></li></ol><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>// package.json
{
    ...
    &quot;husky&quot;: {
      &quot;hooks&quot;: {
        &quot;commit-msg&quot;: &quot;commitlint -E HUSKY_GIT_PARAMS&quot;,
        &quot;pre-commit&quot;: &quot;lint-staged&quot;
      }
    },
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里其实就是定义了两个 <code>hook</code>，在新版 <code>husky</code> 中定义 <code>hook</code> 的方式更改为了命令行，如果想要新增 <code>hook</code>，需要执行：</p><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>npx husky add .husky/pre-commit &quot;lint-staged&quot;
git add .husky/pre-commit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,4),h=o("code",null,"husky",-1),p=o("code",null,"commit-msg",-1),v=o("code",null,"pre-commit",-1),_=o("code",null,"husky",-1),k=o("code",null,"HUSKY_GIT_PARAMS",-1),g={href:"https://typicode.github.io/husky/#/?id=husky_git_params-ie-commitlint-",target:"_blank",rel:"noopener noreferrer"},y=o("code",null,"commlint",-1),b=d(`<div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>npx husky add .husky/commit-msg &quot;npx --no-install commitlint --edit $1&quot;
git add .husky/commit-msg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>在上述配置完成后，就可以重试 <code>commit</code> 操作，看看是否 <code>husky</code> 是否正常运行啦！</strong></p>`,2);function q(S,x){const n=t("ExternalLinkIcon");return l(),c("div",null,[u,o("p",null,[e("附上"),o("a",r,[e("官方文档"),s(n)]),e("，有什么问题可以先自己看一下官方文档~")]),m,o("p",null,[e("以上面的配置为例，我们需要在新版 "),h,e(" 中添加两个钩子："),p,e(" 和 "),v,e("，那就执行两次上面的命令即可。但是在新版 "),_,e(" 中还有一些变化，一个比较重要的点就是 "),k,e(" 这个环境变量不在了，要使用 $1、$2 这种方式替代（"),o("a",g,[e("文档"),s(n)]),e("），因此添加 "),y,e(" 的命令应该是：")]),b])}const N=i(a,[["render",q],["__file","husky4-to-5.html.vue"]]);export{N as default};
