import{_ as t,X as o,Y as p,Z as n,$ as s,a1 as c,a2 as a,C as i}from"./framework-43a12551.js";const r="/CrabSAMA-Blog/assets/image-20230919152008988-cf0bf89a.png",l={},d=a(`<h2 id="问题现象" tabindex="-1"><a class="header-anchor" href="#问题现象" aria-hidden="true">#</a> 问题现象</h2><p>在 <code>Vitepress</code> 中引入组件与样式时，报找不到路径的问题。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> SearchUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@***/bdi-component&#39;</span>
<span class="token keyword">import</span> <span class="token string">&#39;@***/bdi-component/dist/style.css&#39;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+r+'" alt="image-20230919152008988" tabindex="0" loading="lazy"><figcaption>image-20230919152008988</figcaption></figure><h2 id="原因" tabindex="-1"><a class="header-anchor" href="#原因" aria-hidden="true">#</a> 原因</h2>',5),u={href:"https://github.com/vitejs/vite/issues/1505#issuecomment-758824346",target:"_blank",rel:"noopener noreferrer"},k=n("code",null,"exports",-1),m=n("code",null,"exports",-1),v=a(`<p>检查当前项目的 package.json，发现确实定义了 <code>exports</code> 这个属性：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@***/bdi-component&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0-alpha.1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/cjs/index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/es/index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;.&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist/es/index.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token string">&quot;types/index.d.ts&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，这里 <code>.</code> 指向的是 <code>./dist/es/index.js</code>，因此直接 import 时会直接找到 dist 下面的构建产物，但由于 style 等文件没有被显式声明，因此我们没有办法通过路径引入包中的其他内容。</p><h2 id="解决方法" tabindex="-1"><a class="header-anchor" href="#解决方法" aria-hidden="true">#</a> 解决方法</h2><p><code>exports</code> 这个字段其实并不适用于我们这种场景，我们通过定义 <code>main</code> 、<code>module</code> 等字段就可以保证直接 import 找到对应的构建产物。因此我们将 <code>exports</code> 这个属性去掉，就可以正常运行了。</p>`,5);function g(h,b){const e=i("ExternalLinkIcon");return o(),p("div",null,[d,n("p",null,[s("将错误内容在谷歌上搜索，搜到了一条类似的 "),n("a",u,[s("issue"),c(e)]),s("，这里面提到了 package.json 内的一个属性："),k,s("。这个属性会在 bundlers 和 Node.js 中被使用，用于寻找导出的内容，如果没有在 "),m,s(" 中指定的内容，是不会被导出并被寻找到的。")]),v])}const _=t(l,[["render",g],["__file","vite-monorepo-path-error.html.vue"]]);export{_ as default};
