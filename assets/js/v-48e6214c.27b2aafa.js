"use strict";(self.webpackChunkcrabsama_blog=self.webpackChunkcrabsama_blog||[]).push([[9595],{6494:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-48e6214c",path:"/TypeScript/index-types.html",title:"索引类型",lang:"zh-CN",frontmatter:{title:"索引类型",sidebar:"auto",categories:["TypeScript"]},excerpt:"",headers:[{level:2,title:"索引访问操作符",slug:"索引访问操作符",children:[]}],git:{createdTime:1652170033e3,updatedTime:1652170033e3,contributors:[{name:"CrabSAMA",email:"71915282@qq.com",commits:1}]},filePathRelative:"TypeScript/index-types.md"}},2799:(n,s,a)=>{a.r(s),a.d(s,{default:()=>l});var e=a(6252);const t=(0,e.Uk)("TypeScript 高级类型"),p={href:"https://www.tslang.cn/docs/handbook/advanced-types.html",target:"_blank",rel:"noopener noreferrer"},c=(0,e.Uk)("官方文档"),o=(0,e.uE)('<h1 id="索引类型-index-types" tabindex="-1"><a class="header-anchor" href="#索引类型-index-types" aria-hidden="true">#</a> 索引类型（Index types）</h1><p>在项目中时常有通过传入对象 <code>key</code> 值获取对象中其中一个值的需求，现在有一个想法，想通过动态传入的 <code>key</code> 值获取到对应的类型。在 <code>TypeScript</code> 中想要取得一个 <code>interface</code> 其中的一个属性，可以使用这种写法：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> something<span class="token operator">:</span> Interface<span class="token punctuation">[</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> interfaceObj<span class="token punctuation">[</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">]</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>上面的代码就是取 <code>Interface</code> 中名为 <code>key</code> 的类型。</p><p>在方法中我们经常是这样写：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 动态地取某个对象中的一个属性</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>而在 <code>typescript</code> 中要怎样写呢？下面是一个例子：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">getProperty</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// obj[key] is of type T[K]</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这里取到的类型就是 <code>T[&#39;K&#39;]</code>，正合我意！</p><h2 id="索引访问操作符" tabindex="-1"><a class="header-anchor" href="#索引访问操作符" aria-hidden="true">#</a> 索引访问操作符</h2><p><code>K</code> 指代一个动态类型</p><p>在这里，类型语法反映了表达式语法。 这意味着 <code>person[&#39;name&#39;]</code>具有类型 <code>Person[&#39;name&#39;]</code> — 在我们的例子里则为 <code>string</code>类型。 然而，就像索引类型查询一样，你可以在普通的上下文里使用 <code>T[K]</code>，这正是它的强大所在。 你只要确保类型变量 <code>K extends keyof T</code>就可以了。</p>',12),r={},l=(0,a(3744).Z)(r,[["render",function(n,s){const a=(0,e.up)("ExternalLinkIcon");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("blockquote",null,[(0,e._)("p",null,[t,(0,e._)("a",p,[c,(0,e.Wm)(a)])])]),o],64)}]])}}]);