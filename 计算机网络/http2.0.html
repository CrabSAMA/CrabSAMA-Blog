<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <script>
      const userMode = localStorage.getItem('vuepress-reco-color-scheme');
      const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

      if (userMode === 'dark' || (typeof userMode !== 'string' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true);
      }
    </script>
    <link rel="icon" href="./favicon.ico"><title>HTTP 2.0 | CrabSAMA · 笔记</title><meta name="description" content="记录程序狗的点点滴滴">
    <link rel="preload" href="/CrabSAMA-Blog/assets/js/runtime~app.76dfa4f9.js" as="script"><link rel="preload" href="/CrabSAMA-Blog/assets/css/styles.2370ad64.css" as="style"><link rel="preload" href="/CrabSAMA-Blog/assets/js/3769.a4958cd6.js" as="script"><link rel="preload" href="/CrabSAMA-Blog/assets/js/app.74b52bac.js" as="script">
    <link rel="stylesheet" href="/CrabSAMA-Blog/assets/css/styles.2370ad64.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper no-sidebar show-page-headers"><header class="navbar-container"><div class="toggle-sidebar-button" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span class="site-brand"><a href="/CrabSAMA-Blog/" class=""><img class="logo" src="/CrabSAMA-Blog/assets/img/logoa.png" alt="CrabSAMA · 笔记"><span class="site-name can-hide">CrabSAMA · 笔记</span></a></span><div class="navbar-links-wrapper" style=""><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/CrabSAMA-Blog/" class="nav-link" aria-label="CrabLoveWelcome"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->CrabLoveWelcome<!--]--></span></a><!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="分类"><a class="icon-container left title" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->分类<!--]--></span></a><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="分类"><a class="icon-container left title" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->分类<!--]--></span></a><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/JavaScript/1/" class="nav-link" aria-label="JavaScript"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/TypeScript/1/" class="nav-link" aria-label="TypeScript"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/qianduangongchenghua/1/" class="nav-link" aria-label="前端工程化"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->前端工程化<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/bishiti/1/" class="nav-link" aria-label="笔试题"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->笔试题<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/kaifaguifan/1/" class="nav-link" aria-label="开发规范"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->开发规范<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/shijixiangmu/1/" class="nav-link" aria-label="实际项目"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->实际项目<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/jisuanjiwangluo/1/" class="nav-link" aria-label="计算机网络"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->计算机网络<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/Node.js/1/" class="nav-link" aria-label="Node.js"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->Node.js<!--]--></span></a><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><a class="icon-container left btn-toggle-dark-mode" href="javascript:void(0)"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:20px;height:20px;font-size:20px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"></path><path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2"></path><path d="M19 11h2m-1-1v2"></path></g></svg><!----></a></div></header><div class="sidebar-mask"></div><aside class="series-container"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/CrabSAMA-Blog/" class="nav-link" aria-label="CrabLoveWelcome"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->CrabLoveWelcome<!--]--></span></a><!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="分类"><a class="icon-container left title" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->分类<!--]--></span></a><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="分类"><a class="icon-container left title" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->分类<!--]--></span></a><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/JavaScript/1/" class="nav-link" aria-label="JavaScript"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/TypeScript/1/" class="nav-link" aria-label="TypeScript"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/qianduangongchenghua/1/" class="nav-link" aria-label="前端工程化"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->前端工程化<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/bishiti/1/" class="nav-link" aria-label="笔试题"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->笔试题<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/kaifaguifan/1/" class="nav-link" aria-label="开发规范"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->开发规范<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/shijixiangmu/1/" class="nav-link" aria-label="实际项目"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->实际项目<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/jisuanjiwangluo/1/" class="nav-link" aria-label="计算机网络"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->计算机网络<!--]--></span></a><!--[--><!--]--></a></li><li class="dropdown-item"><a href="/CrabSAMA-Blog/categories/Node.js/1/" class="nav-link" aria-label="Node.js"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->Node.js<!--]--></span></a><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--></aside><!--[--><main class="page-container show-page-headers"><h1 class="page-title">HTTP 2.0</h1><div class="page-info"><!----><a class="icon-container left" href="javascript:void(0)"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 7v5l3 3"></path></g></svg><span style="color:inherit;font-size:14px;"><!--[-->2022-05-27 10:00:41<!--]--></span></a><a class="icon-container left" href="javascript:void(0)"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span style="color:inherit;font-size:14px;"><!--[--><!--[--><a href="/CrabSAMA-Blog/categories/计算机网络/1/" class="category">计算机网络</a><!--]--><!--]--></span></a><!----><!----></div><div class="theme-reco-default-content"><!--[--><p><code>HTTP 2.0</code> 的出现，相比于 <code>HTTP 1.x</code> ，大幅度的提升了 <code>web</code> 性能。在与 HTTP/1.1 完全语义兼容的基础上，进一步减少了网络延迟。</p><p><code>Firefox</code> 和 <code>Chrome</code> 早已宣布不支持任何不经过 <code>TLS</code> 加密的 <code>HTTP/2</code> 协议。</p><h2 id="多路复用" tabindex="-1"><a class="header-anchor" href="#多路复用" aria-hidden="true">#</a> 多路复用</h2><p>多路复用允许同时通过单一的 <code>HTTP/2</code> 连接发起多重请求-响应消息。</p><p>众所周知，在 <code>HTTP/1.1</code> 协议中，浏览器客户端在同一时间，针对同一域名下的请求有一定数量限制，超过限制数目的请求会被阻塞。</p><p>这也是为何一些站点有多个静态资源 <code>CDN</code> 域名的原因之一，可以变相地解决浏览器针对同一域名的请求限制阻塞问题。</p><p>而 <code>HTTP/2</code> 的多路复用则允许同时通过<strong>单一的</strong> <strong>HTTP/2</strong> <strong>连接</strong>发起多重的<strong>请求-响应</strong>消息。</p><p><img src="/CrabSAMA-Blog/assets/img/image-20220527180211375.8ebc3320.png" alt="image-20220527180211375"></p><p>因此 <code>HTTP/2</code> 可以很容易的去实现多流并行而不用依赖建立多个 <code>TCP</code> 连接，<code>HTTP/2</code> 把 <code>HTTP</code> 协议通信的基本单位缩小为一个一个的<strong>帧</strong>。</p><h2 id="二进制分帧" tabindex="-1"><a class="header-anchor" href="#二进制分帧" aria-hidden="true">#</a> 二进制分帧</h2><p>在不改动 <code>HTTP/1.x</code> 的语义、方法、状态码、URI 以及首部字段……的情况下，<code>HTTP/2</code> 在应用层（<code>HTTP/2</code>）和传输层（<code>TCP</code> or <code>UDP</code>）之间增加一个<strong>二进制分帧层</strong>。</p><p><img src="/CrabSAMA-Blog/assets/img/image-20220527181454485.9c736b09.png" alt="image-20220527181454485"></p><p>在二进制分帧层中，<code>HTTP/2</code> 会将所有传输的信息分割为更小的消息和帧（<code>frame</code>），并对它们采用二进制格式的编码，其中 <code>HTTP1.x</code> 的首部信息会被封装到 <code>HEADER frame</code>，而相应的 <code>Request Body</code> 则封装到 <code>DATA frame</code> 里面。</p><p><code>HTTP/2</code> 通过让所有数据流共用同一个连接，可以更有效地使用 <code>TCP</code> 连接，让高带宽也能真正的服务于 <code>HTTP</code> 的性能提升。</p><p>总结：</p><ul><li><strong>单连接多资源</strong>的方式，减少服务端的链接压力，内存占用更少，连接吞吐量更大</li><li>由于 <code>TCP</code> 连接的减少而使网络拥塞状况得以改善，同时慢启动时间的减少，事拥塞和丢包恢复速度更快</li></ul><h2 id="首部压缩" tabindex="-1"><a class="header-anchor" href="#首部压缩" aria-hidden="true">#</a> 首部压缩</h2><p><code>HTTP/1.1</code>并不支持 <code>HTTP</code> 首部压缩，为此 <code>SPDY</code> 和 <code>HTTP/2</code> 应运而生。<code>HTTP/2</code> 使用了专门为首部压缩而设计的 <strong><code>HPACK</code></strong> <strong>算法</strong>。</p><p><img src="/CrabSAMA-Blog/assets/img/image-20220527181554326.2b3b95d9.png" alt="image-20220527181554326"></p><h2 id="服务端推送" tabindex="-1"><a class="header-anchor" href="#服务端推送" aria-hidden="true">#</a> 服务端推送</h2><p>服务端推送是一种在客户端请求之前发送数据的机制。在 <code>HTTP/2</code> 中，服务器可以对客户端的<strong>一个</strong>请求发送<strong>多个</strong>响应。如果一个请求是由你的主页发起的，服务器很可能会响应主页内容、logo 以及样式表，因为它知道客户端会用到这些东西。</p><p>服务端推送还有一个很大的优势：可以缓存！也让在遵循同源的情况下，不同页面之间可以共享缓存资源成为可能。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><a class="icon-container left meta-item-label" href="javascript:void(0)"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:20px;height:20px;font-size:20px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11.795 21H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4"></path><circle cx="18" cy="18" r="4"></circle><path d="M15 3v4"></path><path d="M7 3v4"></path><path d="M3 11h16"></path><path d="M18 16.496V18l1 1"></path></g></svg><span style="color:inherit;font-size:14px;"><!--[-->Last Updated 2022-05-27 10:50:48<!--]--></span></a></div></footer><!----><!----></main><!--]--><div class="page-header-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-header-menu-depth_2"><a aria-current="page" href="/CrabSAMA-Blog/jisuanjiwangluo/http2.0.html#多路复用" class="router-link-active router-link-exact-active nav-link page-header-item" aria-label="多路复用"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->多路复用<!--]--></span></a><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-header-menu-depth_2"><a aria-current="page" href="/CrabSAMA-Blog/jisuanjiwangluo/http2.0.html#二进制分帧" class="router-link-active router-link-exact-active nav-link page-header-item" aria-label="二进制分帧"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->二进制分帧<!--]--></span></a><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-header-menu-depth_2"><a aria-current="page" href="/CrabSAMA-Blog/jisuanjiwangluo/http2.0.html#首部压缩" class="router-link-active router-link-exact-active nav-link page-header-item" aria-label="首部压缩"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->首部压缩<!--]--></span></a><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-header-menu-depth_2"><a aria-current="page" href="/CrabSAMA-Blog/jisuanjiwangluo/http2.0.html#服务端推送" class="router-link-active router-link-exact-active nav-link page-header-item" aria-label="服务端推送"><!--[--><!--]--><a class="icon-container left" href="javascript:void(0)"><!----><span style="color:inherit;font-size:14px;"><!--[-->服务端推送<!--]--></span></a><!--[--><!--]--></a></li><!--]--><!--]--></ul></div></div></div><!----><!----><!--]--></div>
    <script src="/CrabSAMA-Blog/assets/js/runtime~app.76dfa4f9.js" defer></script><script src="/CrabSAMA-Blog/assets/js/3769.a4958cd6.js" defer></script><script src="/CrabSAMA-Blog/assets/js/app.74b52bac.js" defer></script>
  </body>
</html>
