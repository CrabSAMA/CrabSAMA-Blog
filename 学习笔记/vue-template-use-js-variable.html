<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://crabsama.github.io/CrabSAMA-Blog/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/vue-template-use-js-variable.html"><meta property="og:site_name" content="CrabSAMA · 笔记"><meta property="og:title" content="Vue 模版使用常量的渲染问题"><meta property="og:description" content="Vue 模版使用常量的渲染问题 Setup 语法糖 flag 和 text 都能在模版上渲染出来 执行 changeText 方法，text 的值会更新，但不渲染 执行 change 方法，flag 的值会更新并渲染 先执行 changeText 方法，再执行 change 方法，flag 和 text 的值都会更新并渲染 执行 batchChange..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-08-22T08:29:16.000Z"><meta property="article:author" content="CrabSAMA"><meta property="article:tag" content="Vue"><meta property="article:published_time" content="2024-08-22T07:53:11.000Z"><meta property="article:modified_time" content="2024-08-22T08:29:16.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Vue 模版使用常量的渲染问题","image":[""],"datePublished":"2024-08-22T07:53:11.000Z","dateModified":"2024-08-22T08:29:16.000Z","author":[{"@type":"Person","name":"CrabSAMA","url":"https://crabsama.github.io/CrabSAMA-Blog"}]}</script><link rel="icon" href="/CrabSAMA-Blog/assets/favicon.ico"><title>Vue 模版使用常量的渲染问题 | CrabSAMA · 笔记</title><meta name="description" content="Vue 模版使用常量的渲染问题 Setup 语法糖 flag 和 text 都能在模版上渲染出来 执行 changeText 方法，text 的值会更新，但不渲染 执行 change 方法，flag 的值会更新并渲染 先执行 changeText 方法，再执行 change 方法，flag 和 text 的值都会更新并渲染 执行 batchChange...">
    <link rel="preload" href="/CrabSAMA-Blog/assets/style-DigvoAJW.css" as="style"><link rel="stylesheet" href="/CrabSAMA-Blog/assets/style-DigvoAJW.css">
    <link rel="modulepreload" href="/CrabSAMA-Blog/assets/app-BS7W8Gul.js"><link rel="modulepreload" href="/CrabSAMA-Blog/assets/vue-template-use-js-variable.html-D43aOf8-.js">
    <link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-DebarZ-M.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/intro.html-B2JPKCc_.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-LPldOfn_.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CaLC6ORk.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/URL.html-D3QuEaBH.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/babel.html-CK9JkxHP.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/boolean-type-changed.html-Tf3JK08p.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/branch-strategy.html-BZzw4UBA.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/browser-cache.html-DdFvlgJj.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/browser-loading-mechanism-and-fouc.html-pM7a0H4a.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/browser-object.html-B7Uxs7R9.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/browser-same-origin.html-C-m0qf43.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/cdn.html-CJm4v90q.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/common-commands.html-DemkU9y-.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/composition-api-programming.html-CxhdfVix.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/cookie-session-cookie.html-ZyALJnjs.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/dom-operation.html-nvk8k-ng.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/extend.html-BgzwX3WH.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/html-semantic-tags.html-DKo5kW5e.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/html5-support-for-browsers.html-CkOnW7Gk.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/http-status-code.html-CDN2L0Rk.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/http2.0.html-hZ3QF-pc.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/https.html-DsWse6NP.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index-types.html-CT39OuyI.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/js-type-changed.html-Dj9g6Tqm.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/lit-element.html-3oENV4JM.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/multi-person-collaboration.html-BLm_BVI8.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/node-http-requests-and-responses.html-DPQkg3vD.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/package-json-exports.html-CXEG140k.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/path.html-t7iM4L4o.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/prefetch-preload.html-Csfvt_u4.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/prototype.html-BwZ2ZH-2.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/proxy.html-B_uKpbgb.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/python-scope-vs-javscript.html-C3u_WDLR.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/react-next-tick.html-CEFuidd2.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/react-router-guard.html-Bv3wiMb6.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/react-strict-mode.html-Ddw_gaq7.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/request-get-post.html-wrHEwKX-.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/set-and-get.html-BElNhs7d.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/stream.html-CteR7oPr.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/tcp-and-udp.html-fdl60A_7.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/text-encode.html-D8hfDnHX.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/unplugin.html-jy016gkm.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/video-frame-types.html--tudF3dP.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/vue-expose.html-D5ZTBsVr.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/vue-next-tick.html-BNjTIvvQ.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/vue-template-ast.html-DnrvC21-.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/webpack-loader-and-plugin.html-boL8MyJU.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/webpack-rule-order.html-CFAhzrQi.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/z-index.html-CUOY0IHr.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/Airbnb代码规范.html-BwMcbbuh.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/JavaScript代码规范.html-Dt0CrpTo.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/eslint提交时拦截.html-Adt7RARk.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/团队代码格式化.html-DYFwG8uj.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/chrome-extension-starter.html-DdIC56Jr.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/different-npm-npx.html-auB0ggMr.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/electron-start.html-k-6J95l9.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/electron-tauri-compare.html-DmpADkN7.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/track-sdk-compare.html-iFiy7g0-.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/vite2-project-practices.html-Cj2Z4sVL.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/wechat-group-emoji-limit.html-ye16C3gX.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/api-302.html-CXide7aU.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/auto-route.html-BNFh9aTI.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/babel6-update-babel7.html-Bl6rhFTw.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/css-animation-causes-high-gpu-usage.html-DPLp9Oht.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/debug-npm-package.html-Ba4UAhPj.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/frontend-logging.html-B5UhIVoY.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/gzip.html-BAZ6igS4.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/h5-problem-solution.html-DtVUfA8e.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/husky4-to-5.html-Bcpk9ZYt.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/nginx-replace.html-CUJCtqvS.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/nginx-reverse-proxy.html-DhGUJkDH.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/props-not-update.html-DX_jynfq.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/regex-lastindex-error.html-DU3IfjFg.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/ue5-movie-render-combind.html-B7o8hSWm.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/unit-test-function.html-BXODyXac.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/unocss-setup.html-Cx7qc_yf.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/vite-monorepo-path-error.html-k12g5ITQ.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/vscode-markdown-snippet.html-C-YI--7k.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/vscode-plugin-dynamic-snippet.html-IxVq5B_h.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/vue-white-page-loading.html-CMHuDuN4.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/vue2-update-vue3.html-CdSgkBZ0.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/vue2-vue3-monorepo-vuepress1-error.html-DVGUa3bv.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/vue3-deep-selector-question.html-BrLNRSY5.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/webpack-update-question.html-eg0gfcUx.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/chrome-extension-collection.html-BuYt1SYG.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/docker-jenkins-blueocean-problems.html-5QZtIysj.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/iteration-example.html-DSb9xco-.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/nodejs-standard-project-directory.html-0U6r8Wg6.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/404.html-DsS2n3R-.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-DrjokbDA.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-D8Z3Ig7r.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BG6KWFg-.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CQX7MFj3.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BZCBncCl.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CntiUYei.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-B-aWUtVo.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-C1nOx-sf.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BmpNvh7h.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-RA482Ttv.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-D60C_IWh.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-DMH_dq7Y.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-DyR9-Q_p.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-DNwJgl-S.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-C5ZIfjp3.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-Eh2qP5O2.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-a4ATfHFk.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-Cxf2RYdF.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-ELnp6bJo.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-zIo2VF_O.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-C8t1jmdg.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-D6OQTHfL.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BfZMYtb0.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-DUH6cQhw.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-C7XIjERQ.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-D3pSUCJc.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-NDB_jIUT.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BAXOYMHL.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-hE1pf4JU.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CNDkgNT2.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CC8djwYy.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-Dk5nfhgb.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BgyPOYsc.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-yjUjjXRP.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-D88aYftc.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-wwxKE-zO.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-B8Zzz5m9.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CAnYDcA7.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-DK4LFXdY.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-KwC4oW5V.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CyEaf83C.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CUMuUYc_.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-GmcyqHls.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-Dp1JsY6X.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-DbV9qzj7.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CIqJ7m6U.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-xzKJdVwd.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-DQGmDsCB.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BXgnq2qh.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html--6xF8RrP.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BTRwhTAz.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-qECGbkA7.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-hdg7ENYh.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-Qj67DSlE.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BekdNwPl.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-B6XvjbIl.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BPb7k1Qb.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CZfmIr5m.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CLDdfkO_.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-jYe9ptgI.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-C8SCX4JB.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CBgjn04m.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BWVT3tnv.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CseMQmD5.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BIXPV0Ju.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-BGR01OTs.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-DJ1Sm91g.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CnzTb17C.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/index.html-CUIV-FZZ.js" as="script"><link rel="prefetch" href="/CrabSAMA-Blog/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/CrabSAMA-Blog/"><img class="vp-nav-logo" src="/CrabSAMA-Blog/assets/img/logo.png" alt><!----><span class="vp-site-name hide-in-pad">CrabSAMA · 笔记</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/CrabSAMA-Blog/" aria-label="主页"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="tabler:home" width="1em" height="1em"></iconify-icon><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/CrabSAMA-Blog/article/" aria-label="文章列表"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ri:article-line" width="1em" height="1em"></iconify-icon><!--]-->文章列表<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="分类"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="tabler:category" width="1em" height="1em"></iconify-icon>分类<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/CrabSAMA-Blog/category/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" aria-label="学习笔记"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="memory:book" width="1em" height="1em"></iconify-icon><!--]-->学习笔记<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/CrabSAMA-Blog/category/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" aria-label="解决方案"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="flowbite:lightbulb-outline" width="1em" height="1em"></iconify-icon><!--]-->解决方案<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/CrabSAMA-Blog/category/%E6%97%A5%E5%BF%97%E9%9A%8F%E7%AC%94/" aria-label="日志随笔"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="hugeicons:task-daily-01" width="1em" height="1em"></iconify-icon><!--]-->日志随笔<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/CrabSAMA-Blog/category/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/" aria-label="开发规范"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="material-symbols:rule-folder-outline" width="1em" height="1em"></iconify-icon><!--]-->开发规范<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/CrabSAMA-Blog/category/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/" aria-label="项目总结"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ant-design:project-outlined" width="1em" height="1em"></iconify-icon><!--]-->项目总结<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/CrabSAMA-Blog/tag/" aria-label="标签"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:tag-outline" width="1em" height="1em"></iconify-icon><!--]-->标签<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/CrabSAMA-Blog/timeline/" aria-label="时间轴"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ic:twotone-timeline" width="1em" height="1em"></iconify-icon><!--]-->时间轴<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/CrabSAMA-Blog/myself/" aria-label="历程"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="gravity-ui:list-timeline" width="1em" height="1em"></iconify-icon><!--]-->历程<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/CrabSAMA/CrabSAMA-Blog" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/" aria-label="主页"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="tabler:home" width="1em" height="1em"></iconify-icon><!--]-->主页<!----></a></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><!----><span class="vp-sidebar-title">学习笔记</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/boolean-type-changed.html" aria-label="boolean类型转换"><!---->boolean类型转换<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/cdn.html" aria-label="CDN入门"><!---->CDN入门<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/composition-api-programming.html" aria-label="Composition API 编程思想"><!---->Composition API 编程思想<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/cookie-session-cookie.html" aria-label="Cookie、Session、Token"><!---->Cookie、Session、Token<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/dom-operation.html" aria-label="DOM操作"><!---->DOM操作<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/request-get-post.html" aria-label="Get 和 Post 请求的区别"><!---->Get 和 Post 请求的区别<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/html5-support-for-browsers.html" aria-label="HTML5对浏览器的支持"><!---->HTML5对浏览器的支持<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/html-semantic-tags.html" aria-label="HTML语义化标签"><!---->HTML语义化标签<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/http2.0.html" aria-label="HTTP 2.0"><!---->HTTP 2.0<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/https.html" aria-label="HTTPS"><!---->HTTPS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/http-status-code.html" aria-label="HTTP状态码"><!---->HTTP状态码<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/extend.html" aria-label="JavaScript语言精粹：继承"><!---->JavaScript语言精粹：继承<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/js-type-changed.html" aria-label="js类型转换"><!---->js类型转换<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lit-element.html" aria-label="Lit Element"><!---->Lit Element<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/node-http-requests-and-responses.html" aria-label="Node.js 操作HTTP请求和响应的常见问题"><!---->Node.js 操作HTTP请求和响应的常见问题<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/package-json-exports.html" aria-label="package.json exports 字段"><!---->package.json exports 字段<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/path.html" aria-label="Path路径"><!---->Path路径<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/prefetch-preload.html" aria-label="prefetch和preload"><!---->prefetch和preload<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/prototype.html" aria-label="Prototype"><!---->Prototype<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/proxy.html" aria-label="Proxy"><!---->Proxy<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/python-scope-vs-javscript.html" aria-label="Python作用域与Javascript对比"><!---->Python作用域与Javascript对比<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/react-strict-mode.html" aria-label="React严格模式"><!---->React严格模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/react-router-guard.html" aria-label="react中实现路由守卫"><!---->react中实现路由守卫<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/react-next-tick.html" aria-label="React实现类似nextTick功能"><!---->React实现类似nextTick功能<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/set-and-get.html" aria-label="Set和Get"><!---->Set和Get<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/stream.html" aria-label="Stream数据流"><!---->Stream数据流<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/tcp-and-udp.html" aria-label="TCP 与 UDP 的区别"><!---->TCP 与 UDP 的区别<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/URL.html" aria-label="URL"><!---->URL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/vue-expose.html" aria-label="Vue Expose 原理"><!---->Vue Expose 原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/vue-next-tick.html" aria-label="Vue nextTick"><!---->Vue nextTick<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/vue-template-ast.html" aria-label="Vue Template AST"><!---->Vue Template AST<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/vue-template-use-js-variable.html" aria-label="Vue 模版使用常量的渲染问题"><!---->Vue 模版使用常量的渲染问题<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/webpack-loader-and-plugin.html" aria-label="Webpack Loader 与 Plugin"><!---->Webpack Loader 与 Plugin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/webpack-rule-order.html" aria-label="webpack规则探索"><!---->webpack规则探索<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/branch-strategy.html" aria-label="分支策略"><!---->分支策略<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/browser-same-origin.html" aria-label="同源策略"><!---->同源策略<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/multi-person-collaboration.html" aria-label="多人协作"><!---->多人协作<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/common-commands.html" aria-label="常用命令"><!---->常用命令<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/babel.html" aria-label="探索 babel"><!---->探索 babel<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/text-encode.html" aria-label="文本编码"><!---->文本编码<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/browser-object.html" aria-label="浏览器对象"><!---->浏览器对象<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/browser-loading-mechanism-and-fouc.html" aria-label="浏览器的加载机制与白屏现象"><!---->浏览器的加载机制与白屏现象<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/browser-cache.html" aria-label="浏览器的缓存机制"><!---->浏览器的缓存机制<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/z-index.html" aria-label="理解z-index"><!---->理解z-index<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/video-frame-types.html" aria-label="视频帧类别"><!---->视频帧类别<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index-types.html" aria-label="索引类型"><!---->索引类型<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/unplugin.html" aria-label="聊聊unplugin"><!---->聊聊unplugin<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Vue 模版使用常量的渲染问题</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://crabsama.github.io/CrabSAMA-Blog" target="_blank" rel="noopener noreferrer">CrabSAMA</a></span><span property="author" content="CrabSAMA"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-08-22T07:53:11.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 6 分钟</span><meta property="timeRequired" content="PT6M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color5 clickable" role="navigation">学习笔记</span><!--]--><meta property="articleSection" content="学习笔记"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color1 clickable" role="navigation">Vue</span><!--]--><meta property="keywords" content="Vue"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#setup-语法糖">Setup 语法糖</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#分析">分析</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#option-api-setup-写法">Option API + setup 写法</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#分析-1">分析</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#为什么-setup-语法糖下变量能被正常更新">为什么 setup 语法糖下变量能被正常更新？</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#option-api-写法">Option API 写法</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#分析-2">分析</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#总结">总结</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="vue-模版使用常量的渲染问题" tabindex="-1"><a class="header-anchor" href="#vue-模版使用常量的渲染问题"><span>Vue 模版使用常量的渲染问题</span></a></h1><h2 id="setup-语法糖" tabindex="-1"><a class="header-anchor" href="#setup-语法糖"><span>Setup 语法糖</span></a></h2><div class="vp-playground"><div class="vp-playground-header"><div class="vp-playground-title">Setup 语法糖</div><div class="vp-playground-actions"><a class="vp-playground-action" href="https://sfc.vuejs.org/#__DEV__eyJBcHAudnVlIjoiPHRlbXBsYXRlPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVRleHRcIj5jb25zdCArMTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVwiPnJlZiB1cGRhdGU8L2J1dHRvbj5cbiAgPGJ1dHRvbiBAY2xpY2s9XCJiYXRjaENoYW5nZVwiPmJhdGNoIHVwZGF0ZTwvYnV0dG9uPlxuICA8ZGl2IGtleT1cIjFcIj57eyB0ZXh0IH19PC9kaXY+XG4gIDxkaXY+e3sgZmxhZyB9fTwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdCBzZXR1cCBsYW5nPVwidHNcIj5cbmltcG9ydCB7IHJlZiB9IGZyb20gJ3Z1ZSdcbmNvbnN0IGZsYWcgPSByZWYoZmFsc2UpXG5sZXQgdGV4dCA9IDFcblxuY29uc3QgY2hhbmdlID0gKCkgPT4ge1xuICBmbGFnLnZhbHVlID0gIWZsYWcudmFsdWVcbn1cblxuY29uc3QgY2hhbmdlVGV4dCA9ICgpID0+IHtcbiAgdGV4dCsrXG59XG5cbmNvbnN0IGJhdGNoQ2hhbmdlID0gKCkgPT4ge1xuICBjaGFuZ2UoKVxuICBjaGFuZ2VUZXh0KClcbn1cbjwvc2NyaXB0PlxuIn0=" target="_blank"><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 74.667C270.933 74.667 74.667 270.933 74.667 512S270.933 949.333 512 949.333 949.333 753.067 949.333 512 753.067 74.667 512 74.667zm0 810.666C307.2 885.333 138.667 716.8 138.667 512S307.2 138.667 512 138.667 885.333 307.2 885.333 512 716.8 885.333 512 885.333z"/><path d="M708.267 465.067 473.6 330.667c-8.533-4.267-17.067-6.4-25.6-6.4-29.867 0-53.333 23.466-53.333 53.333v268.8c0 8.533 2.133 19.2 6.4 25.6 10.666 17.067 27.733 27.733 46.933 27.733 8.533 0 17.067-2.133 25.6-6.4l234.667-134.4c8.533-4.266 14.933-10.666 19.2-19.2 6.4-12.8 8.533-27.733 4.266-40.533-2.133-14.933-10.666-25.6-23.466-34.133zM458.667 627.2V396.8L661.333 512 458.667 627.2z"/></svg></a></div></div><div class="vp-playground-container"><iframe src="https://sfc.vuejs.org/#__DEV__eyJBcHAudnVlIjoiPHRlbXBsYXRlPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVRleHRcIj5jb25zdCArMTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVwiPnJlZiB1cGRhdGU8L2J1dHRvbj5cbiAgPGJ1dHRvbiBAY2xpY2s9XCJiYXRjaENoYW5nZVwiPmJhdGNoIHVwZGF0ZTwvYnV0dG9uPlxuICA8ZGl2IGtleT1cIjFcIj57eyB0ZXh0IH19PC9kaXY+XG4gIDxkaXY+e3sgZmxhZyB9fTwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdCBzZXR1cCBsYW5nPVwidHNcIj5cbmltcG9ydCB7IHJlZiB9IGZyb20gJ3Z1ZSdcbmNvbnN0IGZsYWcgPSByZWYoZmFsc2UpXG5sZXQgdGV4dCA9IDFcblxuY29uc3QgY2hhbmdlID0gKCkgPT4ge1xuICBmbGFnLnZhbHVlID0gIWZsYWcudmFsdWVcbn1cblxuY29uc3QgY2hhbmdlVGV4dCA9ICgpID0+IHtcbiAgdGV4dCsrXG59XG5cbmNvbnN0IGJhdGNoQ2hhbmdlID0gKCkgPT4ge1xuICBjaGFuZ2UoKVxuICBjaGFuZ2VUZXh0KClcbn1cbjwvc2NyaXB0PlxuIn0="></iframe></div></div><ul><li><code>flag</code> 和 <code>text</code> 都能在模版上渲染出来</li><li>执行 <code>changeText</code> 方法，<code>text</code> 的值会更新，但不渲染</li><li>执行 <code>change</code> 方法，<code>flag</code> 的值会更新并渲染</li><li>先执行 <code>changeText</code> 方法，再执行 <code>change</code> 方法，<code>flag</code> 和 <code>text</code> 的值都会更新并渲染</li><li>执行 <code>batchChange</code> 方法，<code>flag</code> 和 <code>text</code> 的值都会更新并渲染</li></ul><h3 id="分析" tabindex="-1"><a class="header-anchor" href="#分析"><span>分析</span></a></h3><p>通过 Vue SFC Playground 查看 Vue SFC 编译后的代码，可以看到 <code>text</code> 和 <code>flag</code> 用于渲染显示的值是从 <code>$setup</code> 这个对象上面取的，因此我们可以推断，在使用 setup 语法糖的时候，所有在 setup script 块里面的变量都会被导出并绑定在 <code>$setup</code> 这个对象上。同时我们还看到我们定义的 js 变量被进行了处理，使用 get / set 修饰符进行了包裹。</p><p>直接更新 ref 时值和模版都能被正常渲染，这个是毋庸置疑的，我们需要去思考的是 js 变量的现象。可以看到，在单独更新 js 变量时，值能被更新但不会渲染，而当再次触发 ref 更新的时候，会顺带将 js 变量当前的值渲染出来，证明了值是有在正常更新的，只不过由于是普通的变量，因此它的变更不会被响应式收集副作用，但在 Vue 重新渲染的时候，就会正常地被渲染出来。</p><h2 id="option-api-setup-写法" tabindex="-1"><a class="header-anchor" href="#option-api-setup-写法"><span>Option API + setup 写法</span></a></h2><div class="vp-playground"><div class="vp-playground-header"><div class="vp-playground-title">Option API + setup 写法</div><div class="vp-playground-actions"><a class="vp-playground-action" href="https://sfc.vuejs.org/#__DEV__eyJBcHAudnVlIjoiPHRlbXBsYXRlPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVRleHRcIj5jb25zdCArMTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVwiPnJlZiB1cGRhdGU8L2J1dHRvbj5cbiAgPGJ1dHRvbiBAY2xpY2s9XCJiYXRjaENoYW5nZVwiPmJhdGNoIHVwZGF0ZTwvYnV0dG9uPlxuICA8ZGl2IGtleT1cIjFcIj57eyB0ZXh0IH19PC9kaXY+XG4gIDxkaXY+e3sgZmxhZyB9fTwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdCBsYW5nPVwidHNcIj5cbmltcG9ydCB7IHJlZiwgZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAndnVlJ1xuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHtcbiAgc2V0dXAoKSB7XG4gICAgY29uc3QgZmxhZyA9IHJlZihmYWxzZSlcbiAgICBsZXQgdGV4dCA9IDFcblxuICAgIGNvbnN0IGNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGZsYWcudmFsdWUgPSAhZmxhZy52YWx1ZVxuICAgIH1cblxuICAgIGNvbnN0IGNoYW5nZVRleHQgPSAoKSA9PiB7XG4gICAgICB0ZXh0KytcbiAgICB9XG5cbiAgICBjb25zdCBiYXRjaENoYW5nZSA9ICgpID0+IHtcbiAgICAgIGNoYW5nZSgpXG4gICAgICBjaGFuZ2VUZXh0KClcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGZsYWcsXG4gICAgICB0ZXh0LFxuICAgICAgY2hhbmdlLFxuICAgICAgY2hhbmdlVGV4dCxcbiAgICAgIGJhdGNoQ2hhbmdlLFxuICAgIH1cbiAgfSxcbn0pXG48L3NjcmlwdD5cbiJ9" target="_blank"><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 74.667C270.933 74.667 74.667 270.933 74.667 512S270.933 949.333 512 949.333 949.333 753.067 949.333 512 753.067 74.667 512 74.667zm0 810.666C307.2 885.333 138.667 716.8 138.667 512S307.2 138.667 512 138.667 885.333 307.2 885.333 512 716.8 885.333 512 885.333z"/><path d="M708.267 465.067 473.6 330.667c-8.533-4.267-17.067-6.4-25.6-6.4-29.867 0-53.333 23.466-53.333 53.333v268.8c0 8.533 2.133 19.2 6.4 25.6 10.666 17.067 27.733 27.733 46.933 27.733 8.533 0 17.067-2.133 25.6-6.4l234.667-134.4c8.533-4.266 14.933-10.666 19.2-19.2 6.4-12.8 8.533-27.733 4.266-40.533-2.133-14.933-10.666-25.6-23.466-34.133zM458.667 627.2V396.8L661.333 512 458.667 627.2z"/></svg></a></div></div><div class="vp-playground-container"><iframe src="https://sfc.vuejs.org/#__DEV__eyJBcHAudnVlIjoiPHRlbXBsYXRlPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVRleHRcIj5jb25zdCArMTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVwiPnJlZiB1cGRhdGU8L2J1dHRvbj5cbiAgPGJ1dHRvbiBAY2xpY2s9XCJiYXRjaENoYW5nZVwiPmJhdGNoIHVwZGF0ZTwvYnV0dG9uPlxuICA8ZGl2IGtleT1cIjFcIj57eyB0ZXh0IH19PC9kaXY+XG4gIDxkaXY+e3sgZmxhZyB9fTwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdCBsYW5nPVwidHNcIj5cbmltcG9ydCB7IHJlZiwgZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAndnVlJ1xuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHtcbiAgc2V0dXAoKSB7XG4gICAgY29uc3QgZmxhZyA9IHJlZihmYWxzZSlcbiAgICBsZXQgdGV4dCA9IDFcblxuICAgIGNvbnN0IGNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGZsYWcudmFsdWUgPSAhZmxhZy52YWx1ZVxuICAgIH1cblxuICAgIGNvbnN0IGNoYW5nZVRleHQgPSAoKSA9PiB7XG4gICAgICB0ZXh0KytcbiAgICB9XG5cbiAgICBjb25zdCBiYXRjaENoYW5nZSA9ICgpID0+IHtcbiAgICAgIGNoYW5nZSgpXG4gICAgICBjaGFuZ2VUZXh0KClcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGZsYWcsXG4gICAgICB0ZXh0LFxuICAgICAgY2hhbmdlLFxuICAgICAgY2hhbmdlVGV4dCxcbiAgICAgIGJhdGNoQ2hhbmdlLFxuICAgIH1cbiAgfSxcbn0pXG48L3NjcmlwdD5cbiJ9"></iframe></div></div><ul><li><code>flag</code> 和 <code>text</code> 都能在模版上渲染出来</li><li>执行 <code>changeText</code> 方法，<code>text</code> 的值会更新，但不会渲染</li><li>执行 <code>change</code> 方法，<code>flag</code> 的值会更新并渲染</li><li>先执行 <code>changeText</code> 方法，再执行 <code>change</code> 方法，<code>text</code> 和 <code>flag</code> 的值都会更新，但只有 <code>flag</code> 的值渲染</li><li>执行 <code>batchChange</code> 方法，<code>text</code> 和 <code>flag</code> 的值都会更新，但只有 <code>flag</code> 的值渲染</li></ul><h3 id="分析-1" tabindex="-1"><a class="header-anchor" href="#分析-1"><span>分析</span></a></h3><p>查看 Vue SFC 编译后的代码，可以发现在使用 Option API + setup 写法的时候，针对变量展示时的取值不一样了，这个时候是从 <code>_ctx</code> 这个对象上面取的。<code>_ctx</code> 这个对象我们在研究后发现，这个就是我们使用 Option API 时常用的 <code>this</code>。当使用 Option API + setup 写法时，setup 函数中导出的变量会被绑定到 <code>_ctx</code> 下，也就是 <code>this</code> 下。</p><p>那为什么在使用这种写法的时候，值有更新，但是不会被渲染呢？第一时间我想到的是，setup 导出的值绑定到 <code>_ctx</code> 的这个过程用的是引用传参。这种传参方式在对待普通变量时，就等于直接将字面值进行赋值，而对待复杂变量（例如对象、数组等）时，是将它的地址进行赋值。要验证这个猜想也很简单，我们只需要将 <code>text</code> 这个普通变量改为对象，然后尝试更改它里面的属性看看是否符合预期即可。</p><p>测试代码如下：</p><div class="vp-playground"><div class="vp-playground-header"><div class="vp-playground-title">Option API + setup 写法，验证复杂变量</div><div class="vp-playground-actions"><a class="vp-playground-action" href="https://sfc.vuejs.org/#__DEV__eyJBcHAudnVlIjoiPHRlbXBsYXRlPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVRleHRcIj5jb25zdCArMTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVwiPnJlZiB1cGRhdGU8L2J1dHRvbj5cbiAgPGJ1dHRvbiBAY2xpY2s9XCJiYXRjaENoYW5nZVwiPmJhdGNoIHVwZGF0ZTwvYnV0dG9uPlxuICA8ZGl2IGtleT1cIjFcIj57eyBvYmoudGV4dCB9fTwvZGl2PlxuICA8ZGl2Pnt7IGZsYWcgfX08L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgbGFuZz1cInRzXCI+XG5pbXBvcnQgeyByZWYsIGRlZmluZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSdcbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7XG4gIHNldHVwKCkge1xuICAgIGNvbnN0IGZsYWcgPSByZWYoZmFsc2UpXG4gICAgbGV0IG9iaiA9IHsgdGV4dDogMSB9XG5cbiAgICBjb25zdCBjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBmbGFnLnZhbHVlID0gIWZsYWcudmFsdWVcbiAgICB9XG5cbiAgICBjb25zdCBjaGFuZ2VUZXh0ID0gKCkgPT4ge1xuICAgICAgb2JqLnRleHQrK1xuICAgIH1cblxuICAgIGNvbnN0IGJhdGNoQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgY2hhbmdlKClcbiAgICAgIGNoYW5nZVRleHQoKVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgZmxhZyxcbiAgICAgIG9iaixcbiAgICAgIGNoYW5nZSxcbiAgICAgIGNoYW5nZVRleHQsXG4gICAgICBiYXRjaENoYW5nZSxcbiAgICB9XG4gIH0sXG59KVxuPC9zY3JpcHQ+XG4ifQ==" target="_blank"><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 74.667C270.933 74.667 74.667 270.933 74.667 512S270.933 949.333 512 949.333 949.333 753.067 949.333 512 753.067 74.667 512 74.667zm0 810.666C307.2 885.333 138.667 716.8 138.667 512S307.2 138.667 512 138.667 885.333 307.2 885.333 512 716.8 885.333 512 885.333z"/><path d="M708.267 465.067 473.6 330.667c-8.533-4.267-17.067-6.4-25.6-6.4-29.867 0-53.333 23.466-53.333 53.333v268.8c0 8.533 2.133 19.2 6.4 25.6 10.666 17.067 27.733 27.733 46.933 27.733 8.533 0 17.067-2.133 25.6-6.4l234.667-134.4c8.533-4.266 14.933-10.666 19.2-19.2 6.4-12.8 8.533-27.733 4.266-40.533-2.133-14.933-10.666-25.6-23.466-34.133zM458.667 627.2V396.8L661.333 512 458.667 627.2z"/></svg></a></div></div><div class="vp-playground-container"><iframe src="https://sfc.vuejs.org/#__DEV__eyJBcHAudnVlIjoiPHRlbXBsYXRlPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVRleHRcIj5jb25zdCArMTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVwiPnJlZiB1cGRhdGU8L2J1dHRvbj5cbiAgPGJ1dHRvbiBAY2xpY2s9XCJiYXRjaENoYW5nZVwiPmJhdGNoIHVwZGF0ZTwvYnV0dG9uPlxuICA8ZGl2IGtleT1cIjFcIj57eyBvYmoudGV4dCB9fTwvZGl2PlxuICA8ZGl2Pnt7IGZsYWcgfX08L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgbGFuZz1cInRzXCI+XG5pbXBvcnQgeyByZWYsIGRlZmluZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSdcbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7XG4gIHNldHVwKCkge1xuICAgIGNvbnN0IGZsYWcgPSByZWYoZmFsc2UpXG4gICAgbGV0IG9iaiA9IHsgdGV4dDogMSB9XG5cbiAgICBjb25zdCBjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBmbGFnLnZhbHVlID0gIWZsYWcudmFsdWVcbiAgICB9XG5cbiAgICBjb25zdCBjaGFuZ2VUZXh0ID0gKCkgPT4ge1xuICAgICAgb2JqLnRleHQrK1xuICAgIH1cblxuICAgIGNvbnN0IGJhdGNoQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgY2hhbmdlKClcbiAgICAgIGNoYW5nZVRleHQoKVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgZmxhZyxcbiAgICAgIG9iaixcbiAgICAgIGNoYW5nZSxcbiAgICAgIGNoYW5nZVRleHQsXG4gICAgICBiYXRjaENoYW5nZSxcbiAgICB9XG4gIH0sXG59KVxuPC9zY3JpcHQ+XG4ifQ=="></iframe></div></div><p>这段代码的执行情况正如我们所想的那样，与上面 setup 语法糖的执行效果一致：<code>obj.text</code> 的值有在更新，但不会被响应式收集，需要借助 ref 值变更时的副作用进行渲染。到这里我们基本可以定论：<strong>setup 导出的值绑定到 <code>_ctx</code> 的这个过程用的就是引用传参</strong>。</p><p>借助这段代码更好理解：</p><div class="vp-playground"><div class="vp-playground-header"><div class="vp-playground-title">Option API + setup 写法，验证值的绑定指向</div><div class="vp-playground-actions"><a class="vp-playground-action" href="https://sfc.vuejs.org/#__DEV__eyJBcHAudnVlIjoiPHRlbXBsYXRlPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVRleHRcIj5jb25zdCArMTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVwiPnJlZiB1cGRhdGU8L2J1dHRvbj5cbiAgPGJ1dHRvbiBAY2xpY2s9XCJiYXRjaENoYW5nZVwiPmJhdGNoIHVwZGF0ZTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cInNob3dcIj5zaG93PC9idXR0b24+XG4gIDxkaXYga2V5PVwiMVwiPnt7IHRleHQgfX08L2Rpdj5cbiAgPGRpdj57eyBmbGFnIH19PC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxuaW1wb3J0IHsgcmVmLCBkZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICBtZXRob2RzOiB7XG4gICAgc2hvdygpIHtcbiAgICAgIGFsZXJ0KHRoaXMudGV4dClcbiAgICB9LFxuICB9LFxuICBzZXR1cCgpIHtcbiAgICBjb25zdCBmbGFnID0gcmVmKGZhbHNlKVxuICAgIGxldCB0ZXh0ID0gMVxuXG4gICAgY29uc3QgY2hhbmdlID0gKCkgPT4ge1xuICAgICAgZmxhZy52YWx1ZSA9ICFmbGFnLnZhbHVlXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlVGV4dCA9ICgpID0+IHtcbiAgICAgIHRleHQrK1xuICAgICAgYWxlcnQodGV4dClcbiAgICB9XG5cbiAgICBjb25zdCBiYXRjaENoYW5nZSA9ICgpID0+IHtcbiAgICAgIGNoYW5nZSgpXG4gICAgICBjaGFuZ2VUZXh0KClcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGZsYWcsXG4gICAgICB0ZXh0LFxuICAgICAgY2hhbmdlLFxuICAgICAgY2hhbmdlVGV4dCxcbiAgICAgIGJhdGNoQ2hhbmdlLFxuICAgIH1cbiAgfSxcbn0pXG48L3NjcmlwdD5cbiJ9" target="_blank"><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 74.667C270.933 74.667 74.667 270.933 74.667 512S270.933 949.333 512 949.333 949.333 753.067 949.333 512 753.067 74.667 512 74.667zm0 810.666C307.2 885.333 138.667 716.8 138.667 512S307.2 138.667 512 138.667 885.333 307.2 885.333 512 716.8 885.333 512 885.333z"/><path d="M708.267 465.067 473.6 330.667c-8.533-4.267-17.067-6.4-25.6-6.4-29.867 0-53.333 23.466-53.333 53.333v268.8c0 8.533 2.133 19.2 6.4 25.6 10.666 17.067 27.733 27.733 46.933 27.733 8.533 0 17.067-2.133 25.6-6.4l234.667-134.4c8.533-4.266 14.933-10.666 19.2-19.2 6.4-12.8 8.533-27.733 4.266-40.533-2.133-14.933-10.666-25.6-23.466-34.133zM458.667 627.2V396.8L661.333 512 458.667 627.2z"/></svg></a></div></div><div class="vp-playground-container"><iframe src="https://sfc.vuejs.org/#__DEV__eyJBcHAudnVlIjoiPHRlbXBsYXRlPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVRleHRcIj5jb25zdCArMTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVwiPnJlZiB1cGRhdGU8L2J1dHRvbj5cbiAgPGJ1dHRvbiBAY2xpY2s9XCJiYXRjaENoYW5nZVwiPmJhdGNoIHVwZGF0ZTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cInNob3dcIj5zaG93PC9idXR0b24+XG4gIDxkaXYga2V5PVwiMVwiPnt7IHRleHQgfX08L2Rpdj5cbiAgPGRpdj57eyBmbGFnIH19PC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxuaW1wb3J0IHsgcmVmLCBkZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICBtZXRob2RzOiB7XG4gICAgc2hvdygpIHtcbiAgICAgIGFsZXJ0KHRoaXMudGV4dClcbiAgICB9LFxuICB9LFxuICBzZXR1cCgpIHtcbiAgICBjb25zdCBmbGFnID0gcmVmKGZhbHNlKVxuICAgIGxldCB0ZXh0ID0gMVxuXG4gICAgY29uc3QgY2hhbmdlID0gKCkgPT4ge1xuICAgICAgZmxhZy52YWx1ZSA9ICFmbGFnLnZhbHVlXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlVGV4dCA9ICgpID0+IHtcbiAgICAgIHRleHQrK1xuICAgICAgYWxlcnQodGV4dClcbiAgICB9XG5cbiAgICBjb25zdCBiYXRjaENoYW5nZSA9ICgpID0+IHtcbiAgICAgIGNoYW5nZSgpXG4gICAgICBjaGFuZ2VUZXh0KClcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGZsYWcsXG4gICAgICB0ZXh0LFxuICAgICAgY2hhbmdlLFxuICAgICAgY2hhbmdlVGV4dCxcbiAgICAgIGJhdGNoQ2hhbmdlLFxuICAgIH1cbiAgfSxcbn0pXG48L3NjcmlwdD5cbiJ9"></iframe></div></div><p>可以发现，<code>changeText</code> 这里面的 <code>text</code> 确实有在变更，但其实这个 <code>text</code> 和绑定到 <code>_ctx</code> 上面的 <code>text</code> 已经不是一个东西了，触发 <code>show</code> 方法可以看到 <code>this.text</code> 一直没有变更。我们执行 <code>changeText</code> 的时候是通过闭包的特性引用了在 setup 函数中定义的 <code>text</code> 变量，修改的是这个闭包变量值。</p><h3 id="为什么-setup-语法糖下变量能被正常更新" tabindex="-1"><a class="header-anchor" href="#为什么-setup-语法糖下变量能被正常更新"><span>为什么 setup 语法糖下变量能被正常更新？</span></a></h3><p>在使用 setup 语法糖时，编译器会对常量进行包裹，同时生成一个新的闭包 <code>$setup</code>。因此在执行代码的过程中，变更的一直是 <code>$setup</code> 里面的值，同时模版中也是直接取 <code>$setup</code> 中的同一个值，因此变量能正常更新。</p><h2 id="option-api-写法" tabindex="-1"><a class="header-anchor" href="#option-api-写法"><span>Option API 写法</span></a></h2><div class="vp-playground"><div class="vp-playground-header"><div class="vp-playground-title">Option API 写法</div><div class="vp-playground-actions"><a class="vp-playground-action" href="https://sfc.vuejs.org/#__DEV__eyJBcHAudnVlIjoiPHRlbXBsYXRlPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVRleHRcIj5jb25zdCArMTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVwiPnJlZiB1cGRhdGU8L2J1dHRvbj5cbiAgPGJ1dHRvbiBAY2xpY2s9XCJiYXRjaENoYW5nZVwiPmJhdGNoIHVwZGF0ZTwvYnV0dG9uPlxuICA8ZGl2IGtleT1cIjFcIj57eyB0ZXh0IH19PC9kaXY+XG4gIDxkaXY+e3sgZmxhZyB9fTwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdCBsYW5nPVwidHNcIj5cbmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSdcbmxldCB0ZXh0ID0gMVxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHtcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmxhZzogZmFsc2UsXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgY2hhbmdlKCkge1xuICAgICAgdGhpcy5mbGFnID0gIXRoaXMuZmxhZ1xuICAgIH0sXG4gICAgY2hhbmdlVGV4dCgpIHtcbiAgICAgIHRleHQrK1xuICAgIH0sXG4gICAgYmF0Y2hDaGFuZ2UoKSB7XG4gICAgICB0aGlzLmNoYW5nZSgpXG4gICAgICB0aGlzLmNoYW5nZVRleHQoKVxuICAgIH0sXG4gIH0sXG59KVxuPC9zY3JpcHQ+XG4ifQ==" target="_blank"><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 74.667C270.933 74.667 74.667 270.933 74.667 512S270.933 949.333 512 949.333 949.333 753.067 949.333 512 753.067 74.667 512 74.667zm0 810.666C307.2 885.333 138.667 716.8 138.667 512S307.2 138.667 512 138.667 885.333 307.2 885.333 512 716.8 885.333 512 885.333z"/><path d="M708.267 465.067 473.6 330.667c-8.533-4.267-17.067-6.4-25.6-6.4-29.867 0-53.333 23.466-53.333 53.333v268.8c0 8.533 2.133 19.2 6.4 25.6 10.666 17.067 27.733 27.733 46.933 27.733 8.533 0 17.067-2.133 25.6-6.4l234.667-134.4c8.533-4.266 14.933-10.666 19.2-19.2 6.4-12.8 8.533-27.733 4.266-40.533-2.133-14.933-10.666-25.6-23.466-34.133zM458.667 627.2V396.8L661.333 512 458.667 627.2z"/></svg></a></div></div><div class="vp-playground-container"><iframe src="https://sfc.vuejs.org/#__DEV__eyJBcHAudnVlIjoiPHRlbXBsYXRlPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVRleHRcIj5jb25zdCArMTwvYnV0dG9uPlxuICA8YnV0dG9uIEBjbGljaz1cImNoYW5nZVwiPnJlZiB1cGRhdGU8L2J1dHRvbj5cbiAgPGJ1dHRvbiBAY2xpY2s9XCJiYXRjaENoYW5nZVwiPmJhdGNoIHVwZGF0ZTwvYnV0dG9uPlxuICA8ZGl2IGtleT1cIjFcIj57eyB0ZXh0IH19PC9kaXY+XG4gIDxkaXY+e3sgZmxhZyB9fTwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdCBsYW5nPVwidHNcIj5cbmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSdcbmxldCB0ZXh0ID0gMVxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHtcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmxhZzogZmFsc2UsXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgY2hhbmdlKCkge1xuICAgICAgdGhpcy5mbGFnID0gIXRoaXMuZmxhZ1xuICAgIH0sXG4gICAgY2hhbmdlVGV4dCgpIHtcbiAgICAgIHRleHQrK1xuICAgIH0sXG4gICAgYmF0Y2hDaGFuZ2UoKSB7XG4gICAgICB0aGlzLmNoYW5nZSgpXG4gICAgICB0aGlzLmNoYW5nZVRleHQoKVxuICAgIH0sXG4gIH0sXG59KVxuPC9zY3JpcHQ+XG4ifQ=="></iframe></div></div><ul><li><code>flag</code> 能在模版上渲染出来，<code>text</code> 无法在模版上渲染出来</li><li>执行 <code>change</code> 方法，<code>flag</code> 的值会更新</li><li>执行 <code>batchChange</code> 方法，<code>flag</code> 和 <code>text</code> 的值都会更新</li></ul><h3 id="分析-2" tabindex="-1"><a class="header-anchor" href="#分析-2"><span>分析</span></a></h3><p>最后一种情况，单纯使用 Option API 的写法，其实在编译过程中编译器已经会提示我们：</p><div class="hint-container warning"><p class="hint-container-title">Warning</p><blockquote><p>Property &quot;text&quot; was accessed during render but is not defined on instance.<br> at &lt;Repl&gt;</p></blockquote></div><p>在看完上面的分析后，我们很容易就知道是什么原因：<code>text</code> 这个变量并没有被绑定到 <code>_ctx</code> 下。那自然是没有办法在模版中使用。</p><p>这种写法与上面的第二种情况类似，此处就不做过多赘述。</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>在对 Vue 模版中使用常量的渲染问题进行分析后，我们发现 setup 语法糖并不是简单的语法变化，它里面还存在一些隐藏的逻辑，比如上面提到的对常量的包裹。同时我们也会发现，使用 setup 语法糖时的一些行为是和使用 setup 函数不一样的。因此我们在后续的使用过程中，要尽量避免踩到这两者差异导致的坑。</p><p>同时我们需要了解的是，在 Vue 模版中使用 js 常量并不是好的习惯，我们需要在模版中实现响应式更新的效果，就需要将对应的值处理成 ref，这个才是避免问题出现的根本解决方案。但有些时候我们会有这种需求，那此时我们就需要结合这篇文章里面提到的知识点，尽量避免踩坑。</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/CrabSAMA/CrabSAMA-Blog/edit/main/blog/学习笔记/vue-template-use-js-variable.md" aria-label="在 GitHub 上编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><!----></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 71915282@qq.com">CrabSAMA</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/vue-template-ast.html" aria-label="Vue Template AST"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->Vue Template AST</div></a><a class="route-link auto-link next" href="/CrabSAMA-Blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/webpack-loader-and-plugin.html" aria-label="Webpack Loader 与 Plugin"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Webpack Loader 与 Plugin<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">Crab Love Welcome~</div><div class="vp-copyright">Copyright © 2024 CrabSAMA </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/CrabSAMA-Blog/assets/app-BS7W8Gul.js" defer></script>
  </body>
</html>
